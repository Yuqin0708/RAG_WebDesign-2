import{k as E,h as y,g as I,c as i,l as N,aj as U,af as z,D as pe,r as H,w as M,an as ke,E as xe,a8 as Pe,u as G,aK as qe,am as Se,aP as A,aS as Ee,ah as Te}from"./index-ICC6MUA8.js";import{a as J,b as V,d as be}from"./_plugin-vue_export-helper-C4fMuBGw.js";import{a as Ce,v as we,m as Q,u as Be,c as Oe,h as De,k as Fe,d as Ke,j as Le,o as _e,i as He,e as Me,l as Ae,q as R,r as Qe,s as j,t as Re,w as je,x as We,y as $e}from"./format-DX_QL8nS.js";const et=E({name:"QSpace",setup(){const e=y("div",{class:"q-space"});return()=>e}}),Ie=["ul","ol"],tt=E({name:"QList",props:{...J,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:o}){const n=I(),s=V(e,n.proxy.$q),a=i(()=>Ie.includes(e.tag)?null:"list"),d=i(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(s.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>y(e.tag,{class:d.value,role:a.value},N(o.default))}}),l=[];let v;function Ne(e){v=e.keyCode===27}function Ue(){v===!0&&(v=!1)}function ze(e){v===!0&&(v=!1,z(e,27)===!0&&l[l.length-1](e))}function X(e){window[e]("keydown",Ne),window[e]("blur",Ue),window[e]("keyup",ze),v=!1}function Ge(e){U.is.desktop===!0&&(l.push(e),l.length===1&&X("addEventListener"))}function W(e){const o=l.indexOf(e);o!==-1&&(l.splice(o,1),l.length===0&&X("removeEventListener"))}const c=[];function Y(e){c[c.length-1](e)}function Je(e){U.is.desktop===!0&&(c.push(e),c.length===1&&document.body.addEventListener("focusin",Y))}function Ve(e){const o=c.indexOf(e);o!==-1&&(c.splice(o,1),c.length===0&&document.body.removeEventListener("focusin",Y))}const ot=E({name:"QMenu",inheritAttrs:!1,props:{...De,...Oe,...J,...Be,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Q},self:{type:String,validator:Q},offset:{type:Array,validator:we},scrollTarget:pe,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Ce,"click","escapeKey"],setup(e,{slots:o,emit:n,attrs:s}){let a=null,d,h,p;const T=I(),{proxy:k}=T,{$q:u}=k,r=H(null),f=H(!1),Z=i(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),ee=V(e,u),{registerTick:te,removeTick:oe}=Fe(),{registerTimeout:b}=Ke(),{transitionProps:ne,transitionStyle:se}=Le(e),{localScrollTarget:C,changeScrollEvent:ae,unconfigureScrollTarget:ie}=_e(e,L),{anchorEl:g,canShow:ue}=He({showing:f}),{hide:w}=Me({showing:f,canShow:ue,handleShow:fe,handleHide:ve,hideOnRouteChange:Z,processOnMount:!0}),{showPortal:B,hidePortal:O,renderPortal:re}=Ae(T,r,ge,"menu"),x={anchorEl:g,innerRef:r,onClickOutside(t){if(e.persistent!==!0&&f.value===!0)return w(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&Se(t),!0}},D=i(()=>R(e.anchor||(e.cover===!0?"center middle":"bottom start"),u.lang.rtl)),le=i(()=>e.cover===!0?D.value:R(e.self||"top start",u.lang.rtl)),ce=i(()=>(e.square===!0?" q-menu--square":"")+(ee.value===!0?" q-menu--dark q-dark":"")),de=i(()=>e.autoClose===!0?{onClick:he}:{}),F=i(()=>f.value===!0&&e.persistent!==!0);M(F,t=>{t===!0?(Ge(q),Qe(x)):(W(q),j(x))});function P(){be(()=>{let t=r.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function fe(t){if(a=e.noRefocus===!1?document.activeElement:null,Je(_),B(),L(),d=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const S=ke(t);if(S.left!==void 0){const{top:me,left:ye}=g.value.getBoundingClientRect();d={left:S.left-ye,top:S.top-me}}}h===void 0&&(h=M(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,m)),e.noFocus!==!0&&document.activeElement.blur(),te(()=>{m(),e.noFocus!==!0&&P()}),b(()=>{u.platform.is.ios===!0&&(p=e.autoClose,r.value.click()),m(),B(!0),n("show",t)},e.transitionDuration)}function ve(t){oe(),O(),K(!0),a!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t?.type.indexOf("key")===0?a.closest('[tabindex]:not([tabindex^="-"])'):void 0)||a).focus(),a=null),b(()=>{O(!0),n("hide",t)},e.transitionDuration)}function K(t){d=void 0,h!==void 0&&(h(),h=void 0),(t===!0||f.value===!0)&&(Ve(_),ie(),j(x),W(q)),t!==!0&&(a=null)}function L(){(g.value!==null||e.scrollTarget!==void 0)&&(C.value=xe(g.value,e.scrollTarget),ae(C.value,m))}function he(t){p!==!0?(Re(k,t),n("click",t)):p=!1}function _(t){F.value===!0&&e.noFocus!==!0&&qe(r.value,t.target)!==!0&&P()}function q(t){e.noEscDismiss!==!0&&(n("escapeKey"),w(t))}function m(){je({targetEl:r.value,offset:e.offset,anchorEl:g.value,anchorOrigin:D.value,selfOrigin:le.value,absoluteOffset:d,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ge(){return y(Pe,ne.value,()=>f.value===!0?y("div",{role:"menu",...s,ref:r,tabindex:-1,class:["q-menu q-position-engine scroll"+ce.value,s.class],style:[s.style,se.value],...de.value},N(o.default)):null)}return G(K),Object.assign(k,{focus:P,updatePosition:m}),re}});function nt(e,o,n){let s;function a(){s!==void 0&&(A.remove(s),s=void 0)}return G(()=>{e.value===!0&&a()}),{removeFromHistory:a,addToHistory(){s={condition:()=>n.value===!0,handler:o},A.add(s)}}}function st(){let e;return{preventBodyScroll(o){o!==e&&(e!==void 0||o===!0)&&(e=o,Ee(o))}}}function $(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const at=Te({name:"close-popup",beforeMount(e,{value:o}){const n={depth:$(o),handler(s){n.depth!==0&&setTimeout(()=>{const a=We(e);a!==void 0&&$e(a,s,n.depth)})},handlerKey(s){z(s,13)===!0&&n.handler(s)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:o,oldValue:n}){o!==n&&(e.__qclosepopup.depth=$(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});export{at as C,ot as Q,st as a,et as b,tt as c,Je as d,Ge as e,W as f,Ve as r,nt as u};
