import{d as V,a0 as I,V as z,r,o as S,a5 as y,X as _,a3 as s,f as t,Q as a,a9 as L,Y as o,Z as N,aa as B,$ as U,p as w,_ as f}from"./index-D1TPSYHU.js";import{Q as h}from"./QInput-D8JRVLzj.js";import{Q as M}from"./QCheckbox-DQS4RkxW.js";import{Q as T}from"./QForm-Bpc2nFBF.js";import{Q as A,a as q,b as C}from"./QItemLabel-BgC97u7X.js";import{c as P,Q as $,_ as F}from"./_plugin-vue_export-helper--F9_0BQo.js";import{u as K}from"./user-store-Dzz7O6ou.js";const R={class:"login-page"},Z={class:"login-container"},j={class:"row full-height full-width"},D={class:"col-12 col-md-6 welcome-panel"},E={class:"welcome-content"},X={class:"logo-container q-mb-xl"},Y={class:"feature-list q-my-xl"},G={class:"feature-item"},H={class:"feature-item q-my-md"},J={class:"feature-item"},O={class:"col-12 col-md-6 flex flex-center login-form-container"},W={key:0,class:"text-negative q-mb-md"},ee={class:"q-ml-xs"},se={class:"flex justify-between items-center q-mt-md"},te=V({__name:"LoginPage",setup(le){const d=P(),g=I(),Q=z(),x=K(),n=r(""),v=r(""),c=r(!1),i=r(!1),k=r(!1),p=r(!1),u=r("");S(()=>{if(x.checkAuth()){g.push("/admin/knowledge").catch(e=>{console.error("Navigation error:",e)});return}const m=localStorage.getItem("remembered_username");m&&(n.value=m,c.value=!0),setTimeout(()=>{k.value=!0},100)});const b=async()=>{u.value="",p.value=!1;try{i.value=!0,await x.login(n.value,v.value)?(c.value?localStorage.setItem("remembered_username",n.value):localStorage.removeItem("remembered_username"),d.loading.show({message:"正在加載系統...",spinnerColor:"primary",spinnerSize:40}),setTimeout(()=>{d.loading.hide();const e=Q.query.redirect||"/admin/knowledge";g.push(e).catch(l=>console.error("Navigation error:",l)),d.notify({color:"positive",message:`歡迎回來，${n.value}！`,icon:"check_circle",position:"top",timeout:2e3})},1e3)):(u.value="帳號或密碼錯誤",p.value=!0,d.notify({color:"negative",message:"登入失敗：帳號或密碼錯誤",icon:"error",position:"top",timeout:3e3}),setTimeout(()=>{p.value=!1},1e3))}catch(m){u.value="登入時發生錯誤，請稍後再試",d.notify({color:"negative",message:"登入時發生錯誤",icon:"error",position:"top"}),console.error(m)}finally{i.value=!1}};return(m,e)=>(_(),y("div",R,[s("div",Z,[s("div",j,[s("div",D,[s("div",E,[s("div",X,[t(a,{name:"local_hospital",size:"40px",color:"white",class:"logo-icon"}),e[3]||(e[3]=s("div",{class:"text-h4 text-white q-ml-sm"},"Asktria",-1))]),e[7]||(e[7]=s("h4",{class:"text-white q-mb-md"},"醫療智能助手管理平台",-1)),e[8]||(e[8]=s("p",{class:"text-grey-3 q-mb-xl"},"結合AI與醫療專業知識，提供高效的醫院服務流程",-1)),s("div",Y,[s("div",G,[t(a,{name:"check_circle",color:"green",size:"24px"}),e[4]||(e[4]=s("span",{class:"q-ml-sm text-white"},"智能分流，減少等候時間",-1))]),s("div",H,[t(a,{name:"check_circle",color:"green",size:"24px"}),e[5]||(e[5]=s("span",{class:"q-ml-sm text-white"},"詳盡醫療信息，滿足患者需求",-1))]),s("div",J,[t(a,{name:"check_circle",color:"green",size:"24px"}),e[6]||(e[6]=s("span",{class:"q-ml-sm text-white"},"數據分析，優化醫院服務",-1))])])]),e[9]||(e[9]=s("div",{class:"wave-container"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"},[s("path",{fill:"#ffffff","fill-opacity":"1",d:"M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,218.7C672,235,768,245,864,245.3C960,245,1056,235,1152,213.3C1248,192,1344,160,1392,144L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})])],-1))]),s("div",O,[s("div",{class:L(["login-form",{"shake-animation":p.value}])},[e[13]||(e[13]=s("div",{class:"text-center q-mb-xl"},[s("div",{class:"text-h4 text-weight-bold q-mb-md text-primary"},"歡迎回來"),s("div",{class:"text-subtitle1 text-grey-7"},"請登入您的帳號以繼續")],-1)),t(T,{onSubmit:b,class:"q-gutter-y-md"},{default:o(()=>[t(h,{outlined:"",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=l=>n.value=l),label:"管理員帳號",class:"input-field",rules:[l=>!!l||"請輸入帳號"],disable:i.value},{prepend:o(()=>[t(a,{name:"person",color:"primary"})]),_:1},8,["modelValue","rules","disable"]),t(h,{outlined:"",type:"password",modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=l=>v.value=l),label:"密碼",class:"input-field",rules:[l=>!!l||"請輸入密碼"],disable:i.value,onKeyup:B(b,["enter"])},{prepend:o(()=>[t(a,{name:"lock",color:"primary"})]),_:1},8,["modelValue","rules","disable"]),u.value?(_(),y("div",W,[t(a,{name:"error",size:"sm"}),s("span",ee,U(u.value),1)])):N("",!0),s("div",se,[t(M,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=l=>c.value=l),label:"記住我",color:"primary",disable:i.value},null,8,["modelValue","disable"]),t(w,{flat:"",color:"primary",label:"忘記密碼？",class:"text-weight-medium",disable:i.value},null,8,["disable"])]),t(w,{unelevated:"",color:"primary",size:"lg",class:"full-width q-py-sm q-mt-lg login-btn",label:"登入系統",type:"submit",loading:i.value},null,8,["loading"]),e[10]||(e[10]=s("div",{class:"text-center q-mt-md text-grey-8"},[f(" 遇到問題？請聯繫 "),s("a",{href:"#",class:"text-primary"},"系統管理員")],-1))]),_:1}),t($,{flat:"",bordered:"",class:"system-status-card q-pa-sm q-mt-xl"},{default:o(()=>[t(A,null,{default:o(()=>[t(q,{avatar:""},{default:o(()=>[t(a,{name:"info",color:"info"})]),_:1}),t(q,null,{default:o(()=>[t(C,{caption:""},{default:o(()=>[...e[11]||(e[11]=[f("系統狀態: ",-1),s("span",{class:"text-positive"},"正常運行中",-1)])]),_:1}),t(C,{caption:""},{default:o(()=>[...e[12]||(e[12]=[f("最近更新: 2025/04/15 09:30",-1)])]),_:1})]),_:1})]),_:1})]),_:1})],2)])])])]))}}),ue=F(te,[["__scopeId","data-v-1bd5f1bd"]]);export{ue as default};
